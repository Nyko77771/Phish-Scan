<<<<<<< HEAD
{"version":3,"file":"content.js","mappings":";;;;AAAA;AACA;AAEA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AAEA;AACA;AAEA;AAOA;AACA;AACA;AAEA;AACA;AACA;AAEA;AAIA;AACA;AACA;AACA;AACA;AAMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAIA;AACA;AACA;AACA;AAEA;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AAEA;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AAEA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA","sources":["webpack://phishscan/./src/content.js"],"sourcesContent":["// Initial Popup Response Handling\r\nlet lastUrl = location.href;\r\n\r\nfunction urlDetectionController() {\r\n  currentUrl = window.location.href;\r\n\r\n  if (currentUrl != lastUrl) {\r\n    console.log(`URL Changed`);\r\n    console.log(`Old URL: ${lastUrl}`);\r\n    console.log(`New URL: ${currentUrl}`);\r\n    lastUrl = currentUrl;\r\n    emailOpenController(currentUrl);\r\n  }\r\n}\r\n\r\nfunction emailOpenController(providedUrl) {\r\n  const url = providedUrl;\r\n\r\n  let emailServiceDetected = false;\r\n  let emailOpenedCheck = false;\r\n\r\n  if (\r\n    url.includes(\"mail.google.com\") ||\r\n    url.includes(\"outlook.office365.com\") ||\r\n    url.includes(\"outlook.live.com\") ||\r\n    url.includes(\"mail.yahoo.com\") ||\r\n    url.includes(\"icloud.com/mail/\")\r\n  ) {\r\n    emailServiceDetected = true;\r\n    console.log(`Service detected`);\r\n  }\r\n\r\n  if (emailServiceDetected) {\r\n    console.log(\"Opened Email Service\");\r\n    console.log(`Url opened: ${url}`);\r\n\r\n    if (\r\n      url.includes(\"mail.google.com/mail/u/0/\") &&\r\n      url.match(/#inbox\\/[a-zA-Z0-9]+/)\r\n    ) {\r\n      emailOpenedCheck = true;\r\n      console.log(`Gmail: Email opened`);\r\n      scanPage();\r\n    }\r\n    if (\r\n      (url.includes(\"outlook.office365.com/mail/\") ||\r\n        url.includes(\"outlook.live.com/mail/\")) &&\r\n      (url.match(/\\/mail\\/inbox\\/id\\/[a-zA-Z0-9]+/) ||\r\n        url.match(/\\/mail\\/[0-9]+\\/sentiments\\/id\\/[a-zA-Z0-9]+/))\r\n    ) {\r\n      emailOpenedCheck = true;\r\n      console.log(`Outlook: Email opened`);\r\n    }\r\n    if (url.includes(\"mail.yahoo.com\") && url.includes(\"/d/message/\")) {\r\n      emailOpenedCheck = true;\r\n      console.log(`YahooMail: Email opened`);\r\n    }\r\n    if (\r\n      url.includes(\"icloud.com/mail\") &&\r\n      url.match(/#.*\\/message\\/[a-zA-Z0-9]+/)\r\n    ) {\r\n      emailOpenedCheck = true;\r\n      console.log(`Apple: Email opened`);\r\n    }\r\n  }\r\n\r\n  console.log(\r\n    `Is service: ${emailServiceDetected}\\nEmail opened: ${emailOpenedCheck}`\r\n  );\r\n\r\n  chrome.runtime.sendMessage({\r\n    message: \"updateStatus\",\r\n    emailServiceDetected,\r\n    emailOpenedCheck,\r\n    url,\r\n  });\r\n}\r\n\r\nfunction pageStateCheck() {\r\n  let oldPushState = history.pushState;\r\n  let oldReplaceState = history.replaceState;\r\n\r\n  history.pushState = function pushState() {\r\n    oldPushState.apply(this, arguments);\r\n    urlDetectionController();\r\n  };\r\n\r\n  history.replaceState = function replaceState() {\r\n    oldReplaceState.apply(this, arguments);\r\n    urlDetectionController();\r\n  };\r\n\r\n  window.addEventListener(\"popstate\", urlDetectionController);\r\n}\r\n\r\npageStateCheck();\r\n\r\nsetTimeout(urlDetectionController, 1000);\r\n\r\n// Email Page Scanning\r\n\r\n/*\r\nchrome.runtime.onMessage.addEventListener((request, sender, sendRespone) => {\r\n  if (request.message === \"scanEmail\") {\r\n  }\r\n});\r\n*/\r\n\r\nfunction scanPage() {\r\n  console.log(`Starting scan`);\r\n  const tags = [\"h1\", \"h2\", \"h3\", \"h4\", \"p\", \"span \", \"div\", \"a\"];\r\n\r\n  var emailContent = [];\r\n  var emailLinks = [];\r\n\r\n  tags.forEach((tag) => {\r\n    console.log(`Tag:${tag}`);\r\n    const elements = document.querySelectorAll(tag);\r\n    elements.forEach((element) => {\r\n      if (element.innerText) {\r\n        console.log(`Element contains text`);\r\n        const text = element.innerText.trim();\r\n        if (text) {\r\n          emailContent.push(text);\r\n        }\r\n      }\r\n\r\n      if (element.tagName.toLowerCase() === \"a\" && element.href) {\r\n        console.log(`Element contains link`);\r\n        emailLinks.push({ link: element.href, text: element.innerText.trim() });\r\n      }\r\n    });\r\n  });\r\n\r\n  console.log(`Finished Email Scan`);\r\n  console.log(`Found text`);\r\n  emailContent.forEach((content) => {\r\n    console.log(content);\r\n  });\r\n}\r\n"],"names":[],"sourceRoot":""}
=======
{"version":3,"file":"content.js","mappings":";;;;AAAA;AAEA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AAEA;AACA;AAEA;AAOA;AACA;AACA;AAEA;AACA;AACA;AAEA;AAIA;AACA;AACA;AACA;AAMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAIA;AACA;AACA;AACA;AAEA;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAKA;AAEA;AAEA","sources":["webpack://phishscan/./src/content.js"],"sourcesContent":["let lastUrl = location.href;\r\n\r\nfunction urlDetectionController() {\r\n  currentUrl = window.location.href;\r\n\r\n  if (currentUrl != lastUrl) {\r\n    console.log(`URL Changed`);\r\n    console.log(`Old URL: ${lastUrl}`);\r\n    console.log(`New URL: ${currentUrl}`);\r\n    lastUrl = currentUrl;\r\n    emailOpenController(currentUrl);\r\n  }\r\n}\r\n\r\nfunction emailOpenController(providedUrl) {\r\n  const url = providedUrl;\r\n\r\n  let emailServiceDetected = false;\r\n  let emailOpenedCheck = false;\r\n\r\n  if (\r\n    url.includes(\"mail.google.com\") ||\r\n    url.includes(\"outlook.office365.com\") ||\r\n    url.includes(\"outlook.live.com\") ||\r\n    url.includes(\"mail.yahoo.com\") ||\r\n    url.includes(\"icloud.com/mail/\")\r\n  ) {\r\n    emailServiceDetected = true;\r\n    console.log(`Service detected`);\r\n  }\r\n\r\n  if (emailServiceDetected) {\r\n    console.log(\"Opened Email Service\");\r\n    console.log(`Url opened: ${url}`);\r\n\r\n    if (\r\n      url.includes(\"mail.google.com/mail/u/0/\") &&\r\n      url.match(/#inbox\\/[a-zA-Z0-9]+/)\r\n    ) {\r\n      emailOpenedCheck = true;\r\n      console.log(`Gmail: Email opened`);\r\n    }\r\n    if (\r\n      (url.includes(\"outlook.office365.com/mail/\") ||\r\n        url.includes(\"outlook.live.com/mail/\")) &&\r\n      (url.match(/\\/mail\\/inbox\\/id\\/[a-zA-Z0-9]+/) ||\r\n        url.match(/\\/mail\\/[0-9]+\\/sentiments\\/id\\/[a-zA-Z0-9]+/))\r\n    ) {\r\n      emailOpenedCheck = true;\r\n      console.log(`Outlook: Email opened`);\r\n    }\r\n    if (url.includes(\"mail.yahoo.com\") && url.includes(\"/d/message/\")) {\r\n      emailOpenedCheck = true;\r\n      console.log(`YahooMail: Email opened`);\r\n    }\r\n    if (\r\n      url.includes(\"icloud.com/mail\") &&\r\n      url.match(/#.*\\/message\\/[a-zA-Z0-9]+/)\r\n    ) {\r\n      emailOpenedCheck = true;\r\n      console.log(`Apple: Email opened`);\r\n    }\r\n  }\r\n\r\n  console.log(\r\n    `Is service: ${emailServiceDetected}\\nEmail opened: ${emailOpenedCheck}`\r\n  );\r\n\r\n  chrome.runtime.sendMessage({\r\n    message: \"updateStatus\",\r\n    emailServiceDetected,\r\n    emailOpenedCheck,\r\n    url,\r\n  });\r\n}\r\n\r\nfunction pageStateCheck() {\r\n  let oldPushState = history.pushState;\r\n  let oldReplaceState = history.replaceState;\r\n\r\n  history.pushState = function pushState() {\r\n    oldPushState.apply(this, arguments);\r\n    urlDetectionController();\r\n  };\r\n\r\n  history.replaceState = function replaceState() {\r\n    oldReplaceState.apply(this, arguments);\r\n    urlDetectionController();\r\n  };\r\n\r\n  window.addEventListener(\"popstate\", urlDetectionController);\r\n\r\n  /*\r\n  const originalPushState = history.pushState;\r\n  const originalReplaceState = history.replaceState;\r\n\r\n  history.pushState = function (...args) {\r\n    originalPushState.apply(this, args);\r\n    urlDetectionController();\r\n  };\r\n\r\n  history.replaceState = function (...args) {\r\n    originalReplaceState.apply(this, args);\r\n    urlDetectionController();\r\n  };\r\n\r\n  window.addEventListener(\"popstate\", urlDetectionController);\r\n\r\n  */\r\n}\r\n\r\npageStateCheck();\r\n\r\nsetTimeout(urlDetectionController, 1000);\r\n"],"names":[],"sourceRoot":""}
>>>>>>> e2bc1b14a9440746a8fecf7df03328e4c591342f
